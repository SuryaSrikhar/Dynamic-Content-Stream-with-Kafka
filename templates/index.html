<!DOCTYPE html>
<html>
<body>
<h2>Request Topic</h2>
<input id="t"/><button onclick="req()">Request</button>
<ul id="list"></ul>

<h2>Subscribe</h2>
<input id="u" placeholder="username"/>
<input id="tt" placeholder="topic"/>
<button onclick="sub()">Subscribe</button>

<script>
async function req(){
 let r=await fetch('/topics',{method:"POST",headers:{"Content-Type":"application/json"},
 body:JSON.stringify({name:document.getElementById('t').value})});
 load();
}
async function sub(){
 await fetch('/subscribe',{method:"POST",headers:{"Content-Type":"application/json"},
 body:JSON.stringify({username:document.getElementById('u').value,topic:document.getElementById('tt').value})});
 alert("Subscribed");
}
async function load(){
 let r=await fetch('/topics'); let d=await r.json();
 document.getElementById('list').innerHTML=d.map(x=>`<li>${x.name} - ${x.status}</li>`).join('');
}
load();
</script>
</body>
</html>

